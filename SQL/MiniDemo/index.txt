############## CONTAINS THE CODE TO GENERATE FAKE USERS AND INSERTING INTO DB

// faker - refers to a package which helps to produce fake data -- command to install -npm i @faker-js/faker
//mysql2 package - helps to connect node with database . mysql -is also one package but i can rise authentication error so just for convinience using mysql2 -- command to install - npm i mysql2
//command to connect you terminal with sql -  mysql -u root -p
const { faker } = require("@faker-js/faker");

const mysql = require("mysql2");
const express = require("express");

const app = express();
// Create the connection to database
const connection = mysql.createConnection({
  host: "localhost",
  user: "root",
  database: "shri_app",
  password: "31848_Vinu",
});

let getRandomUser = () => {
  //returns an array
  return [
    faker.string.uuid(),
    faker.internet.username(),
    faker.internet.email(),
    faker.internet.password(),
  ];
};

// let q = "SHOW TABLES";
//INSERTING NEW DATA
// let q = "INSERT INTO user (id , username , email , password ) VALUES (?,?,?,?)";//for single user
let q = "INSERT INTO user (id , username , email , password ) VALUES ?"; //for multiple users
// let user = ["123","123_newUser","abc@gmail.com","abc"]; //single user
let users = [
  ["124", "124_newUser", "abcd@gmail.com", "abcd"],
  ["125", "125_newUser", "abcde@gmail.com", "abcde"],
];

//inserting data in bulk
let data = [];
for (let i = 1; i <= 100; i++) {
  data.push(getRandomUser()); //100 fake users
}

//Routes to be created :-
//GET - / ->Show no. of users in db
//GET/user ->Show users'(id,email,username)-> ejs //not password 
//PATCH/user/:id -> edit username
//POST -> add user 
//DESTROY -> delete user

try {
  connection.query(q, [data], (err, result) => {
    //user for single user
    if (err) throw err;
    console.log(result);
    // console.log(result.length);
    // console.log(result[0]);
  });
} catch (err) {
  console.log(err);
}
connection.end(); //ends connection

// console.log(getRandomUser());

app.get("/",(req,res)=>{
  res.send("Welcome to home page");
})
app.listen("8000",()=>{
  console.log("Listening to port 8000");
});